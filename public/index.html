<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>kamera</title>
  <meta name="description" content="Babá eletrônica profissional e segura">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="icon" href="/favicon.png">
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>

  <!-- Home / Choice Screen -->
  <div class="center-message" id="choiceScreen">
    <div class="icon-box">
      <img src="/logo.png" alt="kamera" class="brand-logo">
    </div>
    <div class="message-box">
      <h2>Iniciar Sistema</h2>
      <p>Escolha o modo de operação para este dispositivo:</p>

      <div class="choice-grid">
        <button class="btn btn-primary-light" onclick="location.href='/camera.html'">
          <i data-lucide="camera"></i>
          <span>Modo Câmera</span>
        </button>

        <button class="btn btn-secondary-light" id="btnJoinViewer">
          <i data-lucide="monitor"></i>
          <span>Modo Monitor</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Waiting Screen -->
  <div class="center-message hidden" id="waitingScreen" style="display:none;">
    <div class="icon-box">
      <img src="/logo.png" alt="kamera" class="brand-logo">
    </div>
    <div class="message-box">
      <h2>Aguardando Sinal</h2>
      <p>O monitor está ativo, mas não há sinal de vídeo. Inicie a transmissão no outro dispositivo.</p>
      <button class="btn btn-secondary" id="btnBackToHome">
        Voltar ao Início
      </button>
    </div>
  </div>

  <!-- Video Stream -->
  <div class="video-container" id="videoContainer" style="display:none;">
    <video id="remoteVideo" autoplay playsinline muted></video>
    <div class="night-vision-overlay" id="nightVisionOverlay"></div>
  </div>

  <!-- Top Bar -->
  <div class="top-bar" id="topBar" style="display:none;">
    <div class="logo">
      <img src="/logo.png" alt="kamera" class="brand-logo">
    </div>
    <div class="status-badge live" id="statusBadge">
      <span class="status-dot"></span>
      <span id="statusText">Ao Vivo</span>
    </div>
  </div>

  <!-- Bottom Bar -->
  <div class="bottom-bar" id="bottomBar" style="display:none;">
    <button class="btn btn-circle" id="btnRotate" title="Rotacionar">
      <i data-lucide="rotate-cw"></i>
    </button>
    <button class="btn btn-circle" id="btnFlipRemote" title="Trocar Lente">
      <i data-lucide="shuffle"></i>
    </button>
    <button class="btn btn-circle" id="btnNightVision" title="Visão Noturna">
      <i data-lucide="moon"></i>
    </button>
    <button class="btn btn-circle" id="btnMute" title="Áudio">
      <i data-lucide="volume-x"></i>
    </button>
    <button class="btn btn-circle" id="btnFullscreen" title="Tela Cheia">
      <i data-lucide="maximize"></i>
    </button>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/viewer.js"></script>

  <!-- SVG Filters for Advanced Night Vision -->
  <svg style="display: none;">
    <filter id="nightVisionFilter">
      <!-- 1. Gamma Correction: "Lift" midtones (gamma = 0.6) -->
      <feComponentTransfer>
        <feFuncR type="gamma" amplitude="1" exponent="0.6" />
        <feFuncG type="gamma" amplitude="1" exponent="0.6" />
        <feFuncB type="gamma" amplitude="1" exponent="0.6" />
      </feComponentTransfer>

      <!-- 2. Grayscale + Green Tint + High Contrast -->
      <feColorMatrix type="matrix" values="
        0.33 0.33 0.33 0 0
        0    1    0    0 0
        0    0    0    0 0
        0    0    0    1 0" />
    </filter>
  </svg>
</body>

</html>